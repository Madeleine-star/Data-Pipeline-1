<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
	<!--
  Stylesheet Description: Transforms XML order data into HTML invoices.
  -->
	<xsl:output method="html" indent="yes"/>
	<!-- Output the transformed XML as HTML with indentation for readability -->
	<!-- Main template that matches the root of the XML document -->
	<xsl:template match="/">
		<html>
			<body>
				<xsl:for-each select="Root">
					<xsl:apply-templates select="Customers/Customer"/>
				</xsl:for-each>
			</body>
		</html>
	</xsl:template>
	<xsl:template match="Customers/Customer">
		<h1>Invoice ID: <xsl:value-of select="Invoice/@CustInvID"/>
		</h1>
		<h2>Order details for <xsl:value-of select="CustomerName"/>
		</h2>
		<p>Address: <xsl:value-of select="CustomerAddress"/>
		</p>
		<p>Phone number: <xsl:value-of select="Phone_number"/>
		</p>
		<p>Email: <xsl:value-of select="Cust_email"/>
		</p>
		<h3>Ordered items:</h3>
		<ul>
		<xsl:if test="Invoice/@CustInvID = 'AW01'">
		<xsl:apply-templates select="//parent::Root/Invoices/invoice[@invoiceID='AW01']"/>
		</xsl:if>
		<xsl:if test="Invoice/@CustInvID = 'CS01'">
		<xsl:apply-templates select="//parent::Root/Invoices/invoice[@invoiceID='CS01']"/>
		</xsl:if>
		<xsl:if test="Invoice/@CustInvID = 'SD01'">
		<xsl:apply-templates select="//parent::Root/Invoices/invoice[@invoiceID='SD01']"/>
		</xsl:if>
		<xsl:if test="Invoice/@CustInvID = 'CD01'">
		<xsl:apply-templates select="//parent::Root/Invoices/invoice[@invoiceID='CD01']"/>
		</xsl:if>
		</ul>
	</xsl:template>
	<xsl:template match="Invoices/invoice[@invoiceID='AW01']">
		
			<li>
				<xsl:value-of select="rec_list/recipe"/>
			</li>
			<h3>Order total: <xsl:value-of select="rec_list/recipe_price"/><xsl:text> </xsl:text><xsl:value-of select="rec_list/recipe_price/@devise"/></h3>
			<p>Delivery start date: <xsl:value-of select="delivery_startDate"/>
			</p>
			<p>Delivery end date: <xsl:value-of select="delivery_EndDate"/></p>

	</xsl:template>
	<xsl:template match="Invoices/invoice[@invoiceID='CS01']">
		
			<li>
				<xsl:value-of select="rec_list/recipe"/>
			</li>
			<h3>Order total: <xsl:value-of select="rec_list/recipe_price"/><xsl:text> </xsl:text><xsl:value-of select="rec_list/recipe_price/@devise"/></h3>
			<p>Delivery start date: <xsl:value-of select="delivery_startDate"/>
			</p>
			<p>Delivery end date: <xsl:value-of select="delivery_EndDate"/></p>

	</xsl:template>
	<xsl:template match="Invoices/invoice[@invoiceID='CD01']">
		
			<li>
				<xsl:value-of select="rec_list/recipe"/>
			</li>
			<h3>Order total: <xsl:value-of select="rec_list/recipe_price"/><xsl:text> </xsl:text><xsl:value-of select="rec_list/recipe_price/@devise"/></h3>
			<p>Delivery start date: <xsl:value-of select="delivery_startDate"/>
			</p>
			<p>Delivery end date: <xsl:value-of select="delivery_EndDate"/></p>

	</xsl:template>
	<xsl:template match="Invoices/invoice[@invoiceID='SD01']">
		
			<li>
				<xsl:value-of select="rec_list/recipe"/>
			</li>
			<h3>Order total: <xsl:value-of select="rec_list/recipe_price"/><xsl:text> </xsl:text><xsl:value-of select="rec_list/recipe_price/@devise"/></h3>
			<p>Delivery start date: <xsl:value-of select="delivery_startDate"/>
			</p>
			<p>Delivery end date: <xsl:value-of select="delivery_EndDate"/></p>

	</xsl:template>
</xsl:stylesheet>
